{
    "variables": {
        "image_os": "alpine:latest"
    },

    "builders": [
        {   
            "type": "docker",
            "image": "{{user `image_os`}}",
            "commit": true
        }
    ],

    "provisioners": [
        {
            "type": "shell",
            "pause_before": "3s",
            "inline": ["echo THIS IS NEEDED!!! Only doing this to add a pause before file transfers"],
            "pause_after": "3s"
        },
        {
            "type": "file",
            "source": "./install-files/welcome.txt",
            "destination": "/tmp/welcome.txt"
        },
        {
            "type": "shell",
            "pause_before": "4s",
            "execute_command": "chmod +x {{ .Path }}; {{ .Vars }} sudo -E {{ .Path }}",
            "scripts": [
                "./install-scripts/update-upgrade-system.sh",
                "./install-scripts/add-user-jeff.sh",
                "./install-scripts/move-welcome-file-to-jeff.sh",
                "./install-scripts/install-packages.sh"
            ]
        }
    ]
}
